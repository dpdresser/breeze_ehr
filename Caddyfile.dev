localhost:3000, 127.0.0.1:3000 {
    # Self-signed certificates for development
    tls internal

    # API routes to Rust backend
    handle /api/* {
        reverse_proxy https://127.0.0.1:8443 {
            transport http {
                tls_insecure_skip_verify
            }
        }
    }

    # Documentation
    handle /docs/* {
        reverse_proxy https://127.0.0.1:8443 {
            transport http {
                tls_insecure_skip_verify
            }
        }
    }

    # Frontend static files
    handle {
        root * frontend
        try_files {path} {path}.html {path}/index.html /index.html
        file_server
    }

    # Development logging (more verbose)
    log {
        output file logs/dev-access.log
        level DEBUG
        format filter {
            wrap console
            fields {
                request>uri>query delete
            }
        }
    }

    # Relaxed CORS for development
    header {
        Access-Control-Allow-Origin *
        Access-Control-Allow-Methods "GET, POST, PUT, DELETE, OPTIONS"
        Access-Control-Allow-Headers "Authorization, Content-Type"
    }
}